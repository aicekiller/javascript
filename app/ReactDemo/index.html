<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>react demo</title>
    <script src="../../bower_components/react/react.min.js"></script>
    <script src="../../bower_components/react/react-dom.min.js"></script>
    <script src="../scripts/browser.min.js"></script>

</head>
<body>
<div id="wrap"></div>
<script type="text/babel">
    var Card = React.createClass({
        getDefaultProps: function () {
            console.log("getDefaultProps: Default prop time!");
        },
        getInitialState: function () {
            return {
                count: 0
            }
        },
        componentWillMount: function () {
            console.log("componentWillMount: Component is about to mount!");
        },
        render: function () {
            var cardStyle = {
                width: 150,
                padding: 0,
                backgroundColor: "#fff",
                WebkitFilter: "drop-shadow(0px 0px 5px #666)",
                filter: "drop-shadow(0px 0px 5px #666)"
            };
            var buttonStyle = {
                width: 150,
                backgroundColor: "#ff0000",
                color: "#fff",
                textAlign: "center",
                lineHeight: "30px",
                border: 0
            };
            return (
                    <div className="card" style={cardStyle}>
                        <Square {...this.props}/>
                        <Label totalNum={this.state.count} {...this.props}/>
                        <button onClick={this.addCount} style={buttonStyle}>增加</button>
                    </div>
            );
        },
        componentDidMount: function () {
            console.log("componentDidMount: Component just mounted!");
        },
        addCount: function (e) {
            var currentCount = this.state.count;
            if (e.shiftKey) {
                currentCount += 10;
            } else {
                currentCount += 1;
            }
            this.setState({
                count: currentCount
            })
        },
        shouldComponentUpdate: function (newProps, newState) {
            console.log("shouldComponentUpdate: Should component update?");
            if (newState.count < 5) {
                console.log("shouldComponentUpdate: Component should update!");
                return true;
            } else {
                //ReactDOM.unmountComponentAtNode(document.getElementById('wrap'));
                console.log("shouldComponentUpdate: Component should not update!");
                return true;
            }
        },
        componentWillUpdate: function (newProps, newState) {
            console.log("componentWillUpdate: Component is about to update!");
        },
        componentDidUpdate: function (currentProps, currentState) {
            console.log("componentDidUpdate: Component just updated!");
        },

        componentWillUnmount: function () {
            console.log("componentWillUnmount: Component is about to be removed from the DOM!");
        },

        componentWillReceiveProps: function (newProps) {
            console.log("componentWillReceiveProps: Component will get new props!");
        }


    });

    var Square = React.createClass({
        render: function () {
            var squareStyle = {
                height: 150,
                backgroundColor: this.props.color
            };
            return (
                    <div style={squareStyle}></div>
            );
        }
    });

    var Label = React.createClass({
        render: function () {
            var labelStyle = {
                fontWeight: "bold",
                padding: 13,
                margin: 0,
                textAlign: 'center'
            };
            var numStyle = {
                color: "green"
            };
            return (
                    <div style={labelStyle}>
                        {this.props.color}
                        <div style={numStyle}>{this.props.totalNum}</div>
                    </div>

            );
        }
    });
    function randomColor() {
        var colors = ["#393E41", "#E94F37", "#1C89BF", "#A1D363"];
        var ran = Math.floor(Math.random() * colors.length);
        return <Card color={colors[ran]}/>
    }
    /*let colors = ["#393E41", "#E94F37", "#1C89BF", "#A1D363"];
     let arr = [];
     for (var i = 0; i < colors.length; i++) {
     arr.push(<Card color={colors[i]}/>);
     }*/
    ReactDOM.render(
        randomColor(),
        document.getElementById('wrap')
    );

</script>
</body>
</html>